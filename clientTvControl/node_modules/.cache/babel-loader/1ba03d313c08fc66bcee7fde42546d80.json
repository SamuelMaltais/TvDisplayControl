{"ast":null,"code":"import _classCallCheck from\"C:/Users/admin/Desktop/TvDisplayControl/clientTvControl/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/admin/Desktop/TvDisplayControl/clientTvControl/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/admin/Desktop/TvDisplayControl/clientTvControl/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/admin/Desktop/TvDisplayControl/clientTvControl/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var Display=/*#__PURE__*/function(_Component){_inherits(Display,_Component);var _super=_createSuper(Display);function Display(props){var _this;_classCallCheck(this,Display);_this=_super.call(this,props);_this.getImage=function(){var elementstring=\"\";fetch(\"https://server-for-mcgill-display.herokuapp.com/display\").then(function(response){return response.json();}).then(function(body){elementstring=body.message;var array=elementstring.trim().split(/\\s+/);_this.setState({result:array});document.body.style.backgroundRepeat=\"no-repeat\";document.body.style.backgroundSize=\"cover\";console.log(array);if(!_this.state.hasInterval){_this.triggerOnInterval();_this.timerID=setInterval(function(){return _this.triggerOnInterval();},12000);_this.setState({hasInterval:true});}}).catch(function(error){console.log(error);});};_this.triggerOnInterval=function(){var path=_this.state.result[_this.state.increment%_this.state.result.length];document.body.style.backgroundImage=\"url('https://server-for-mcgill-display.herokuapp.com/\"+path+\"')\";_this.setState({increment:_this.state.increment+1});console.log(_this.state.result);if(_this.state.increment%60==0){_this.getImage();}};_this.changeResultString=function(){};_this.state={image:\"ok\",increment:0,result:[],hasInterval:false};return _this;}_createClass(Display,[{key:\"componentDidMount\",value:function componentDidMount(){this.getImage();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.timerID);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{});}}]);return Display;}(Component);export{Display as default};","map":{"version":3,"names":["Component","Display","props","getImage","elementstring","fetch","then","response","json","body","message","array","trim","split","setState","result","document","style","backgroundRepeat","backgroundSize","console","log","state","hasInterval","triggerOnInterval","timerID","setInterval","catch","error","path","increment","length","backgroundImage","changeResultString","image","clearInterval"],"sources":["C:/Users/admin/Desktop/TvDisplayControl/clientTvControl/src/Components/Display.js"],"sourcesContent":["import { Component } from \"react\";\r\n\r\nexport default class Display extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      image: \"ok\",\r\n      increment: 0,\r\n      result: [],\r\n      hasInterval: false,\r\n    };\r\n  }\r\n\r\n  getImage = () => {\r\n    let elementstring = \"\";\r\n    fetch(\"https://server-for-mcgill-display.herokuapp.com/display\")\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((body) => {\r\n        elementstring = body.message;\r\n        let array = elementstring.trim().split(/\\s+/);\r\n        this.setState({ result: array });\r\n        document.body.style.backgroundRepeat = \"no-repeat\";\r\n        document.body.style.backgroundSize = \"cover\";\r\n        console.log(array);\r\n        if (!this.state.hasInterval) {\r\n          this.triggerOnInterval();\r\n          this.timerID = setInterval(() => this.triggerOnInterval(), 12000);\r\n          this.setState({ hasInterval: true });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n  componentDidMount() {\r\n    this.getImage();\r\n  }\r\n  componentWillUnmount() {\r\n    clearInterval(this.timerID);\r\n  }\r\n  triggerOnInterval = () => {\r\n    let path =\r\n      this.state.result[this.state.increment % this.state.result.length];\r\n    document.body.style.backgroundImage =\r\n      \"url('https://server-for-mcgill-display.herokuapp.com/\" + path + \"')\";\r\n    this.setState({ increment: this.state.increment + 1 });\r\n    console.log(this.state.result);\r\n    if (this.state.increment % 60 == 0) {\r\n      this.getImage();\r\n    }\r\n  };\r\n  changeResultString = () => {};\r\n\r\n  render() {\r\n    return <div></div>;\r\n  }\r\n}\r\n"],"mappings":"oiBAAA,OAASA,SAAT,KAA0B,OAA1B,C,8CAEqBC,Q,kGACnB,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MAUnBC,QAVmB,CAUR,UAAM,CACf,GAAIC,cAAa,CAAG,EAApB,CACAC,KAAK,CAAC,yDAAD,CAAL,CACGC,IADH,CACQ,SAACC,QAAD,CAAc,CAClB,MAAOA,SAAQ,CAACC,IAAT,EAAP,CACD,CAHH,EAIGF,IAJH,CAIQ,SAACG,IAAD,CAAU,CACdL,aAAa,CAAGK,IAAI,CAACC,OAArB,CACA,GAAIC,MAAK,CAAGP,aAAa,CAACQ,IAAd,GAAqBC,KAArB,CAA2B,KAA3B,CAAZ,CACA,MAAKC,QAAL,CAAc,CAAEC,MAAM,CAAEJ,KAAV,CAAd,EACAK,QAAQ,CAACP,IAAT,CAAcQ,KAAd,CAAoBC,gBAApB,CAAuC,WAAvC,CACAF,QAAQ,CAACP,IAAT,CAAcQ,KAAd,CAAoBE,cAApB,CAAqC,OAArC,CACAC,OAAO,CAACC,GAAR,CAAYV,KAAZ,EACA,GAAI,CAAC,MAAKW,KAAL,CAAWC,WAAhB,CAA6B,CAC3B,MAAKC,iBAAL,GACA,MAAKC,OAAL,CAAeC,WAAW,CAAC,iBAAM,OAAKF,iBAAL,EAAN,EAAD,CAAiC,KAAjC,CAA1B,CACA,MAAKV,QAAL,CAAc,CAAES,WAAW,CAAE,IAAf,CAAd,EACD,CACF,CAhBH,EAiBGI,KAjBH,CAiBS,SAACC,KAAD,CAAW,CAChBR,OAAO,CAACC,GAAR,CAAYO,KAAZ,EACD,CAnBH,EAoBD,CAhCkB,OAuCnBJ,iBAvCmB,CAuCC,UAAM,CACxB,GAAIK,KAAI,CACN,MAAKP,KAAL,CAAWP,MAAX,CAAkB,MAAKO,KAAL,CAAWQ,SAAX,CAAuB,MAAKR,KAAL,CAAWP,MAAX,CAAkBgB,MAA3D,CADF,CAEAf,QAAQ,CAACP,IAAT,CAAcQ,KAAd,CAAoBe,eAApB,CACE,wDAA0DH,IAA1D,CAAiE,IADnE,CAEA,MAAKf,QAAL,CAAc,CAAEgB,SAAS,CAAE,MAAKR,KAAL,CAAWQ,SAAX,CAAuB,CAApC,CAAd,EACAV,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWP,MAAvB,EACA,GAAI,MAAKO,KAAL,CAAWQ,SAAX,CAAuB,EAAvB,EAA6B,CAAjC,CAAoC,CAClC,MAAK3B,QAAL,GACD,CACF,CAjDkB,OAkDnB8B,kBAlDmB,CAkDE,UAAM,CAAE,CAlDV,CAEjB,MAAKX,KAAL,CAAa,CACXY,KAAK,CAAE,IADI,CAEXJ,SAAS,CAAE,CAFA,CAGXf,MAAM,CAAE,EAHG,CAIXQ,WAAW,CAAE,KAJF,CAAb,CAFiB,aAQlB,C,qDAyBD,4BAAoB,CAClB,KAAKpB,QAAL,GACD,C,oCACD,+BAAuB,CACrBgC,aAAa,CAAC,KAAKV,OAAN,CAAb,CACD,C,sBAcD,iBAAS,CACP,mBAAO,cAAP,CACD,C,qBAvDkCzB,S,SAAhBC,O"},"metadata":{},"sourceType":"module"}